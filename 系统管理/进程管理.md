# 进程管理

在每个进程看来，当前主机上只存在内核和当前进程

进程是程序的副本，进程是程序执行实例

shell可以有子shell

bash--bash

## 查看进程状态

w

- w username 查看某个用户的进程 

ps - report a snapshot of the current processes

- a 显示所有用户进程
- u 显示用户名和启动时间
- x 显示没有控制终端的进程
- e 显示所有进程，包括没有控制终端的进程
- l 长格式显示
- 常用格式 ps aux，ps el
- PPID 父进程的进程号
- TTY 进程启动的终端，?
- STAT 进程当前状态
  - S 休眠
  - D 不可中断的休眠
  - R 运行
  - Z 僵死，即没有父进程的子进程
  - T 停止
- NI 进程优先级
- TIME 进程启动以来使用CPU总时间
- --sort pid 可以按pid、时间等排序

终端类型：
	console: 控制台
	pty: 物理终端 (VGA)
	tty#: 虚拟终端 (VGA)
	ttyS#: 串行终端
	pts/#: 伪终端

who
每隔5秒钟，就来查看hadoop是否已经登录，如登录，显示其已经登录，并退出；

sleep 

whoami

last，显示/var/log/wtmp文件，显示用户登录历史及系统重启历史
	-n #: 显示最近#次的相关信息
lastb，/var/log/btmp文件，显示用户错误的登录尝试
	-n #:
lastlog: 显示每一个用户最近一次的成功登录信息；
	-u USERNAME: 显示特定用户最近的登录信息

basename
	$0: 执行脚本时的脚本路径及名称

Examples:
  basename /usr/bin/sort       Output "sort".
  basename include/stdio.h .h  Output "stdio".
	

## 杀死进程

kill

- kill pid 杀死进程
- kill -l 显示所有信号
- kill -s signal pid 向对应pid的进程发送信号

killall servicename 杀死所有与服务名相关的进程

xkill 图形界面下杀死进程，输入命令后鼠标点击的窗口将关闭

ctrl+alt+backspace 图形界面死掉时，用于关闭图形界面

## 进程优先级（-20~19）

nice -n command 指定程序运行优先级

renice n pid  改变正在运行的进程优先级

top 进程状态实时显示（每5秒钟刷新）和进程控制

- top -d n 间隔n秒刷新
- top -c 显示命令完整路径
- h 查看使用帮助
- k 终止程序进程
- u 查看用户进程
- r 重新设置优先级
- s 设置刷新时间间隔

## 后台

command & 准备运行命令时使其后台运行

ctrl+z 命令开启后使其后台运行

ctrl+c 中断进程

jobs 查看后台进程

fg n 将标识号为n的后台进程转到前台

bg n 使用其他终端再将n转到后台运行
