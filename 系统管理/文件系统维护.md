# 文件系统的维护

## ext2/ext3文件系统的优化和高级特性

mkfs.ext3 /dev/sdb1 格式化

mkfs.ext3 -b 4096 -i 4096 -m 2 /dev/sda2

- -m 保留块的百分比，默认为数据块的5%

tune2fs 调整ext2或者ext3文件系统特性

- -l 查看文件系统信息
- -c 设置强制自检的挂载次数
- -i 设置强制自检的间隔时间
- -m 保留块百分比
- -j 将ext2文件系统转化为ext3

## 磁盘检查

fsck 

fsck -t ext2 /dev/sdb1

fsck.ext3 /dev/sdb1

## 磁盘配额

- 限制普通用户使用的磁盘空间
- 只有ext2/ext3文件系统支持
- 需要quota软件包

磁盘配额配置过程

- 使用usrquota，grpquota选项配置一个分区，激活内核支持

mount -o usrquota,grpquota /dev/sdb1 /mnt/d1

mount -o remount,usrquota,grpquota /

- 永久支持需要编辑磁盘配置文件，/etc/fstab 将defaults后加入usrquota，grpquota

- init 1 （进入单用户环境，或者确定没有其他人使用也行）

- quotacheck -cvuga检查并且创建磁盘配额的数据库文件

- edquota -u username 为用户分配磁盘空间和节点数量

- quotaon 开启磁盘配额

- quota命令查看用户配额使用情况，或者repquota -a查看所有用户

- quotaoff 关闭磁盘配额

- 永久删除需要编辑/etc/fstab

- 删除磁盘配额数据库 quota.group quota.user

## 自动挂载分区
