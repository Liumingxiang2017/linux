# 基础知识

GUI: Graphic User Interface

- windows 
- X-Windows X表示图形显示协议，CS架构，和主机可分离
- Gnome: C
- KDE: C++
- XFace：简洁的，适合嵌入式平台，轻量级的操作系统

CLI: Command Line Interface

- sh 默认shell，sh是bash的连接，还是指向bash的
- bash 最广泛，最强大，大多数linux默认使用的shell
- csh 兼容C语言的shell
- zsh
- ksh
- tcsh

用户类型提示符:

- #: root
- $: 普通用户

magic number: 魔数，可以标识二进制程序的执行

脚本开头一行#!/bin/bash 用来指定魔数，也称作shebang

IDE: Integrated Development Environment 集成开发环境

简单操作系统：kernal+shell+shell需要的library: API

## 命令

### 命令类型

内置命令(shell内置)

外部命令：在文件系统的某个路径下有一个与命令名称相应的可执行文件

获得命令的使用帮助：

内部命令：help COMMAND

外部命令：COMMAND --help

### 命令格式

command   options...  arguments...

命令    选项       参数

- 选项： 修改命令执行特性
- 短选项： -
- 多个选项可以组合：-a -b = -ab
- 长选项： --
- 参数：指定命令的作用对象

当敲下命令，这个执行程序由bash提交给内核，再由内核找这个执行程序的魔数，看是不是可执行格式。

认证机制：Authentication；授权：Authorization；审计：Audition (日志)

虚拟终端(terminal)：Ctrl+Alt+F1-F6 默认是6个，个数可以定义

模拟终端：图形界面中启动的terminal

启动图形界面: startx & 也等于快捷键 Ctrl+Alt+F7；linux可以启动多个图形界面

su: switch user

- su [-l] 用户名
- su student 半切换
- su -l student 完全切换

passwd：设置密码

密码复杂性规则：
10^6
36^6
62^6
100^6

Linuxedu@126.com

1、使用4种类别字符中至少3种；
2、足够长，大于7位；
3、使用随机字符串；
4、定期更换；
5、循环周期足够大；

## 目录管理

pwd

    Printing Working directory

ls :list 列出指定路径下的文件

目录也是一种文件，是路径映射文件

路径：从指定起始点到目的地所经过位置，实现层次化管理文件的机制。

层次性结构，可以很快追溯文件位置

文件系统：file system 层次化管理机制 倒置的树状目录结构

每时每刻都在一个目录：工作目录working directory, 当前目录current directory

FHS： File System Hierachy Standard 文件系统层级标准

选项options：

    -l：Long长格式

        文件类型：

            -：普通文件 (f)

            d: 目录文件

            b: 块设备文件 (block)

            c: 字符设备文件 (character)

            l: 符号链接文件(symbolic link file 软链接文件)

            p: 管道文件(pipe)

            s: 套接字文件(socket)

        文件权限：9位，每3位一组，每一组：rwx(读，写，执行), r--

        文件硬链接的次数

        文件的属主(owner)

        文件的属组(group)

        文件大小(size)，单位是字节

        时间戳(timestamp)：最近一次被修改的时间

            访问:access

            修改:modify，文件内容发生了改变

            改变:change，metadata，元数据

            一个文件有两种数据，一个是文件的内容，一个是文件的属性数据（元数据metadata）

    -h：human readable 人类易读（单位转换）

    -a: 显示以.开头的隐藏文件

        . 表示当前目录

        .. 表示父目录

    -A: 显示所有隐藏文件，但不包括.和..

    -d: 显示目录自身属性

    -i: index node, inode 索引节点，有一个对应的号码

    -r: reverse逆序显示

    -R: 递归(recursive)显示

思考：ls命令是否可以显示某目录的整体大小，即包括其内部的所有文件的整体大小？

du ： estimate file space usage

    -s --summarize : display only a total for each argument

    -h --human-readable : print sizes in human readable format (e.g., 1k 234M 2G)

### cd: change directory 切换目录

家目录，也叫主目录, home directory

cd ~USERNAME: 进入指定用户的家目录

cd -:在当前目录和前一次所在的目录之间来回切换

!$ 直接访问上次任何命令涉及的目录，不同于cd -

### mkdir：创建空目录

-p: parent  同时创建父目录

-v: verbose详细的   查看详细创建过程

    比如创建/root/x/y/z

    /mnt/test/x/m,y

    mkdir -pv /mnt/test/x/m /mnt/test/y

    mkdir -pv /mnt/test/{x/m,y}

~USERNAME （波浪线展开，用户家目录）

### 命令行展开（花括号展开）

花括号展开的表达式可以看作一个由 花括号、逗号 和 小写英文字母 组成的字符串，定义下面几条语法规则：

如果只给出单一的元素 x，那么表达式表示的字符串就只有 "x"。 

    例如，表达式 {a} 表示字符串 "a"。

    而表达式 {ab} 就表示字符串 "ab"。

当两个或多个表达式并列，以逗号分隔时，我们取这些表达式中元素的并集。

    例如，表达式 {a,b,c} 表示字符串 "a","b","c"。

    而表达式 {a,b},{b,c} 也可以表示字符串 "a","b","c"。

要是两个或多个表达式相接，中间没有隔开时，我们从这些表达式中各取一个元素依次连接形成字符串。

    例如，表达式 {a,b}{c,d} 表示字符串 "ac","ad","bc","bd"。

表达式之间允许嵌套，单一元素与表达式的连接也是允许的。

    例如，表达式 a{b,c,d} 表示字符串 "ab","ac","ad"​​​​​​。

    例如，表达式 {a{b,c}}{{d,e}f{g,h}} 可以代换为 {ab,ac}{dfg,dfh,efg,efh}，表示字符串 "abdfg", "abdfh", "abefg", "abefh", "acdfg", "acdfh", "acefg", "acefh"。

    /mnt/test2/
    a_b, a_c, d_b, d_c
    (a+d)(b+c)=ab+ac+db+dc
    {a,d}_{b,c}

### tree：查看目录树

### rmdir (remove directory) 删除目录

无参数只能删除空目录

-p：parent 同时删除父目录

## 文件管理

ASCII: 美国国家标准交换代码

128不同的字符：

二进制：

    2^6=0,63
    2^7=0,127
    000 0000 - 111 1111
    2^16: 65536

编码标准：GB18030, GBK, GB2312，Unicode

### touch : change file timestamps 修改时间戳

时间戳：最近一次访问，最近一次修改时间，最近一次改变时间

-a  change only the access time 只改变访问时间

-m  change only the modification time 只改变修改时间

-t  STAMP  use [[CC]YY]MMDDhhmm[.ss] instead of current time 指定某个时间

-c  --no-create do not creat any file 如果不存在就不创建文件

创建文件，可以使用VI文件编辑器

### stat : display file or file system status 显示文件或者文件系统状态信息

### cp : copy 复制文件或者文件夹

SYNOPSIS : cp [OPTIONS] SRC DEST

-r, -R, --recursive : copy directories recursively 若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。

-f 强制复制，覆盖已经存在的目标文件而不给出提示。

-p 除复制文件的内容外，还把修改时间和访问权限也复制到新文件中。

-a 此选项通常在复制目录时使用，它保留链接、文件属性，并复制目录下的所有内容。其作用等于dpR参数组合。常用于备份

-d : same as --no-dereference --preserve=links 复制时保留链接。这里所说的链接相当于Windows系统中的快捷方式。

-v, --verbose : explain what is being done 

-l ：不复制文件，只是生成链接文件。

多个文件到一个目录

cp /etc/{passwd,inittab,rc.d/rc.sysinit} /tmp/

### mv : move 移动文件

mv SRC DEST

mv -t DEST SRC

### install : copy files and set attributes

install [OPTION] SRC DEST

-d DIRECOTRY ... ：创建目录

install -t DIRECTORY SRC...

-t, --target-directory=DIRECTORY copy all SOURCE arguments into DIRECTORY

### rm 删除文件或者文件夹

-i prompt before every removal

-f --force : ignore nonexistent files, never prompt

-r -R --recursive : remove direcotrys and their contents recursively

严禁使用 rm -rf /

## 日期时间管理

### date 显示系统日期和时间

date命令可以用来显示或设定系统的日期与时间，在显示方面，使用者可以设定欲显示的格式，格式设定为一个加号后接数个标记 。

若是不以加号作为开头，则表示要设定时间，而时间格式MMDDhhmm[[CC]YY][.ss]，其中 MM 为月份，DD 为日，hh 为小时，mm 为分钟，CC 为年份前两位数字，YY 为年份后两位数字，ss 为秒数。

语法格式：date [选项] [+输出形式]

查看举例：date "+%Y_%m_%d  %H-%M-%S"

常用参数：

    -d datestr 显示 datestr 中所设定的时间 (非系统时间)
    -s datestr 将系统时间设为 datestr 中所设定的时间
        设置时间：date -s "2018-05-17 09:51:50"
    -u 显示目前的格林威治时间
    --help 显示帮助信息
    --version 显示版本编号

注意：这里说的是系统时间，是linux由操作系统维护的。

在系统启动时，Linux操作系统将时间从CMOS中读到系统时间变量中，以后修改时间通过修改系统时间实现。为了保持系统时间与CMOS时间的一致性，Linux每隔一段时间会将系统时间写入CMOS。由于该同步是每隔一段时间（大约是11分钟）进行的，在我们执行date -s后，如果马上重起机器，修改时间就有可能没有被写入CMOS,这就是问题的原因。

如果要确保修改生效可以执行如下命令。

hwclock –w

这个命令强制把系统时间写入CMOS。

### hwclock 显示硬件时间

默认是显示时间（硬件时间）

-w: 将系统时间写到硬件中去

-s: 将硬件时间写到系统中去

FAQ: frequent answer and question

### cal: display a calendar

## 文本

文本相关的命令

查看：cat, tac, more, less, head, tail
统计：wc
处理：tr, cut, join
排序：sort
uniq

### cat：连接并显示

-n

-E

Ctrl+c

### more: 向后翻

分屏显示

### less

分屏显示

### head:查看前n行

### tail:

-n 查看后n行

tail -f 实时查看最后几行， 查看文件尾部，不退出，等待显示后续追加至此文件的新内容；

## 文本处理

cut、join、sed、awk

database:数据库

关系型数据库：
表：二维表

文本文件：
Tom:23:male:2013/05/06

### cut

-d: 指定字段分隔符，默认是空格
-f: 指定要显示的字段
    -f 1,3
    -f 1-3

### sort 文本排序

-n：数值排序
-r: 降序
-t: 字段分隔符
-k: 以哪个字段为关键字进行排序
-u: 排序后相同的行只显示一次
-f: 排序时忽略字符大小写

### uniq

-c: 显示文件中行重复的次数
-d: 只显示重复的行

### wc (word count) 文本统计

-l
-w
-c
-L

### tr —— 转换或删除字符

tr [OPTION]... SET1 [SET2]

-d: 删除出现在字符集中的所有字符

tr ab AB

练习1

1、echo是内部命令还是外部命令？

    type echo --> echo is a shell builtin

2、使用帮助查看其作用？

    man echo 或者 help echo

3、如何显示“The year is 2013. Today is 26.”为两行？

    echo -e "The year is 2013.\nToday is 26"

    \ 转义符，逃逸

练习2：

1、printf是内部命令还是外部命令？

    type printf --> printf is a shell builtin

2、其作用？

    man printf 或者 help echo

3、如何显示“The year is 2013. Today is 26.”为两行？

    printf "The year is 2013.\nToday is 26.\n"  默认不打印换行符，需要手动指定。

file 查看文件类型

    常见文件类型：
    
    Windows: PE  PE文件的全称是Portable Executable，意为可移植的可执行的文件，
        常见的EXE、DLL、OCX、SYS、COM都是PE文件，
        PE文件是微软Windows操作系统上的程序文件（可能是间接被执行，如DLL）

    Linux: ELF 可执行可链接的文件类型，linux常见可执行二进制文件
        中文名 可执行与可链接格式 
        外文名 Executable and Linkable Format 
        常用扩展名 o，so，elf，prx 
        开发者 Unix系统实验室

ln 

- 链接命令的源文件和目标文件必须使用**绝对路径**，否则是死链接
- ln 源文件 目标文件 硬链接不可以跨设备链接

whereis 显示系统命令和帮助手册所在的目录

whatis 命令简单说明

updatedb 更新数据库索引，设置定期更新用于locate查找文件

grep -v "^#" /etc/httpd/conf/httpd.conf 文件内查找文本,可用于去掉注释

man :manual 手册

    格式：man COMMAND 

    可以用于查找命令、C语言、配置文件帮助，需要时使用whatis 确定是man n,whatis COMMAND

    分章节内容分别为：

        1：用户命令(/bin, /usr/bin, /usr/local/bin)
    
        2：系统调用
    
        3：库用户
    
        4：特殊文件(设备文件)
    
        5：文件格式(配置文件的语法)
    
        6：游戏
    
        7：杂项(Miscellaneous)

        8: 管理命令(/sbin, /usr/sbin, /usr/local/sbin)

    符号意义：

        <>：必选

        []：可选

        ...：可以出现多次

        |：多选一

        {}：分组
    
    单词含义：

        NAME：命令名称及功能简要说明

        SYNOPSIS（概要 大纲）：用法说明，包括可用的选项

        DESCRIPTION：命令功能的详尽说明，可能包括每一个选项的意义

        OPTIONS：说明每一个选项的意义

        FILES：此命令相关的配置文件

        BUGS：漏洞

        EXAMPLES：使用示例

        SEE ALSO：另外参照

    翻屏：

        向后翻一屏：SPACE
        向前翻一屏：b
        向后翻一行：ENTER
        向前翻一行：k

    查找：

        /KEYWORD: 向后
        n: 下一个
        N：前一个 

        ?KEYWORD：向前
        n: 下一个
        N：前一个 

    q: 退出

info COMMAND

文档：/usr/share/doc

专门的帮助文档：apache, hadoop

type: 显示指定属于哪种类型

## 压缩与解压缩

gzip 

- 只能压缩单个文件,结果为.gz
- -1 快速压缩 -9 最佳压缩
- 解压缩为gunzip

zip

- -r 压缩目录
- 解压缩为unzip

tar

- zcvf 格式：tar zxvf directory.tar.gz directory打包并压缩为.tar.gz
- zxvf 解压缩

## 发送信息

write

- write username 发送信息

wall

- wall message 向所有用户发消息

mesg

- 设置是否接受其他用户发送的信息
- -y 接收
- -n 不接收（不能屏蔽管理员发送的信息）

## 邮件

mail

- 需要先开启邮件服务 service sendmail start 或者 /etc/init.d/sendmail start
- mail username 发送
- mail 查看收件箱，1或者其他数字读信，r回信，q退出



## 磁盘管理

df -h 查看分区大小

du -sh /* 查看根目录下每个文件夹占用的空间， -s表示总大小

fdisk -l /dev/sda 查看磁盘/dev/sda的分区情况

hdparm /dev/sda 查看磁盘信息

## 网络

/etc/resolv.conf 保存默认域名和DNS服务器

route -n 查看默认路由

ping -b 192.168.0.255 扫描网段活动主机

### 临时设置

ifconfig eth0 addr 设置网卡IP地址

route add default gw 192.168.0.1 添加默认网关

### 永久设置

使用netconfig命令

/etc/sysconfig/network-scripts/ifcfg-eth0 网络配置文件目录

## 语言

locale 查看语言

LANG=en_US.UTF-8 设置语言环境，表示英语_美国地区.UTF-8字符集，

locale -a 查看所有语言支持

/etc/sysconfig/i18n 语言环境配置文件

## 其他

/etc/rc.local ：This script will be executed after all the other init scripts. You can put your own initialization stuff in here.

/etc/sysconfig/ 该目录是大部分服务器程序和系统启动脚本的配置文件

### chkconfig命令

chkconfig 服务名称 on/off

chkconfig --list 查看系统启动服务列表

chkconfig sshd --list 查看sshd服务列表

init启动的所有服务均放在/etc/init.d目录下

ls -ld /etc/rc?.d

runlevel 查看运行级别

/etc/inittab 系统初始化主要配置文件

ntsysv 用于管理自启动服务