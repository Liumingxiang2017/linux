# 用户管理

Linux下由三类用户:

1. 超级用户：root，具有操作系统一切权限，UID值为0
2. 普通用户：普通用户具有有限权限，UID值500~6000
3. 伪用户：为了方便系统管理，满足相应系统进程文件属主的要求，不能登录，UID值1~499

/etc/passwd 用户账号配置文件，分7部分：

1. 账号名称
2. 密码，x说明有密码，删掉就不需要密码了
3. UID
4. GID
5. 注释信息
6. 家目录
7. shell

/etc/shadow 用户密码文件，只有root可读，分9个字段:

1. 用户名
2. 加密密码（*或者！！表示该用户没有密码，或者在某个用户前面加上！让其密码失效，让该用户无法登录）
3. 最后修改时间（以时间戳的形式，以1970年1月1日为起始日期）
4. 修改密码的间隔时间（距离上一次修改密码间隔多少天才能修改）
5. 密码的有效期，默认9999天，可以更改
6. 密码提醒时间（表示在密码失效时间的前面几天提示更改密码，以密码失效时间的最后几天开始算）失效后禁止登录
7. 密码宽限时间（密码过期后几天仍然可以使用并且提示更改密码）过了这个时间后禁止登录（0或者没有表示没有宽限时间，-1表示永久生效）
8. 账号失效时间，时间戳为单位。没填表示永久生效
9. 保留字段

## 创建账户

1. 在/etc/passwd中添加一条记录
2. 创建用户家目录，并更改权限
3. 在用户家目录中配置设置文件
4. 设置用户初始口令

useradd或者adduser 创建用户

- -u 指定用户UID，默认值是上一个UID+1
- -g 指定GID
- -G 指定附加组
- -d 指定家目录
- -s 指定shell
- -c 指定用户说明

passwd 设置密码

- passwd -l username 停止账号使用
- -u 启用已被停止的账户

userdel 

- userdel username, 删除用户，但不会删除家目录
- -r 可删除用户家目录及用户所有信息

usermod 

- usermod -l new_username old_username 只改用户名，不改变家目录
- -L 锁定用户，等于在/etc/shadow对应字段前加一个！
- -U 解锁用户

/etc/skel 创建家目录时默认创建内容

## 用户组的管理

用户组分为：私有组 标准组

/etc/group 组配置文件，三个冒号分为4部分：

1. 组名
2. 组密码
3. GID
4. 组成员

- 增加组：groupadd groupname

- 更改组账号名：groupmod -n newGroupName oldGroupName

- 删除组账号：groupdel groupName 组必须存在，且不能是私有组。

- 添加用户到组：gpasswd -a userName groupName

- 从组中删除用户：gpasswd -d userName groupName

- 查看用户所在组: groups userName

id

- id userName
- 查看用户UID和GID 
- -u -g -G

finger

- 查看用户相关信息，包括用户家目录，启动shell，用户名
